#Наследование ограничений
* Часто в бизнес-модели действует механизм наследования. При использовании
валидации компонентов приходится накладывать ограничения на классы, супер-
классы или интерфейсы вашей бизнес-модели. Наследование ограничений у свойств
работает точно так же, как и обычное наследование в Java: оно является кумуля-
тивным. Таким образом, если один компонент наследует от другого, то ограничения
наследуемого компонента также заимствуются и будут валидироваться.
* В листинге 3.15 показан класс CD, расширяющий Item (листинг 3.14). Оба клас-
са имеют атрибуты и применяемые с ними ограничения. Если валидируется экзем-
пляр CD, то валидируются не только его ограничения, но и ограничения, налагаемые
на родительский класс.
```xml
public class Item {
    @NotNull
    protected Long id;
    @NotNull @Size(min = 4, max = 50)
    protected String title;
    protected Float price;
    protected String description;
    @NotNull
    public Float calculateVAT() {
        return price * 0.196f;
    }
    @NotNull
    public Float calculatePrice(@DecimalMin("1.2") Float rate) {
        return price * rate;
    }
}
```
```xml
public class CD extends Item {
    @Pattern(regexp = "[A-Z][a-z]{1,}")
    private String musicCompany;
    @Max(value = 5)
    private Integer numberOfCDs;
    private Float totalDuration;
    @MusicGenre
    private String genre;
    // ConstraintDeclarationException : не допускается при переопределении метода
    public Float calculatePrice(@DecimalMin("1.4") Float rate) {
        return price * rate;
    }
}
```
* Такой же механизм наследования применяется и с ограничениями, действу-
ющими на уровне методов. Метод calculateVAT, объявляемый в Item, наследуется в CD.
Но в случае переопределения метода нужно уделять особое внимание при опреде-
лении ограничений для параметров. Лишь корневой метод переопределяемого
метода может аннотироваться ограничениями параметров. Причина такого условия
состоит в том, что предусловия нельзя ужесточать для подтипов. Напротив, в под-
типах можно добавлять ограничения для возвращаемых значений в любом коли-
честве (постусловия можно ужесточать).
* Итак, если вы валидируете calculatePrice класса CD (см. листинг 3.15), среда
исполнения валидации компонентов будет выдавать исключение javax.validati-
on.ConstraintDeclarationException. Оно означает, что только корневой метод пере-
определенного метода может использовать ограничения параметров.
